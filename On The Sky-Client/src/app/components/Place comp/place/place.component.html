<app-header></app-header>
<app-navbar></app-navbar>

<h2>Destinations</h2>

<!-- ×©×•×¨×ª ×—×™×¤×•×© ×œ××©×ª××© ×¨×’×™×œ -->
<div *ngIf="!isManager" style="margin-bottom: 10px;">
  <input
    type="text"
    [(ngModel)]="searchText"
    (input)="onSearchChange()"
    placeholder="Search country..."
  />
</div>

<!-- ×ª×¦×•×’×ª ×¨×©×™××” -->
<ul>
  <li *ngFor="let place of (isManager ? places : filteredPlaces)">
    {{ place.country }}
    <ng-container *ngIf="isManager">
      <button (click)="startEdit(place)">âœï¸</button>
      <button (click)="delete(place.countryid)">ğŸ—‘ï¸</button>
    </ng-container>
  </li>
</ul>

<!-- ×˜×•×¤×¡ ×œ×× ×”×œ ×‘×œ×‘×“ -->
<div *ngIf="isManager">
  <h3>{{ editingId ? 'Edit Place' : 'Add New Place' }}</h3>

  <form [formGroup]="form" (ngSubmit)="save()">
    <input formControlName="country" placeholder="Country name" />
    <button type="submit" [disabled]="form.invalid">
      {{ editingId ? 'Update' : 'Add' }}
    </button>
    <button type="button" (click)="cancelEdit()">Cancel</button>
  </form>

  <ng-container *ngIf="country">
    <div
      *ngIf="country.invalid && (country.dirty || country.touched)"
      style="color:red"
    >
      <div *ngIf="country.errors?.['required']">Country is required.</div>
      <div *ngIf="country.errors?.['minlength']">
        Minimum 2 characters.
      </div>
    </div>
  </ng-container>
</div>
